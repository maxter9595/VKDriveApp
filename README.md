# üñºÔ∏è VKDriveApp - —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∏–∑ VK –≤ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫

<img src="./demo/1-intro/1.gif" width="100%">

## 1. API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å                   | –û–ø–∏—Å–∞–Ω–∏–µ                                                |
|-------|------------------------|---------------------------------------------------------|
| POST  | `/api/auth/register/`  | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                         |
| POST  | `/api/auth/login/`     | –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                                       |
| POST  | `/api/auth/logout/`    | –í—ã—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                                      |
| GET   | `/api/auth/me/`        | –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ             |
| POST  | `/api/auth/tokens/`    | –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ VK –∏ Yandex                          |
| GET   | `/api/auth/tokens/`    | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤                           |

#### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤)

| –ú–µ—Ç–æ–¥  | –ü—É—Ç—å                              | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
|--------|-----------------------------------|---------------------------------------------|
| GET    | `/api/users/`                     | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π              |
| POST   | `/api/users/`                     | –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–¥–º–∏–Ω–æ–º)      |
| PUT    | `/api/users/:id/role/`            | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                 |
| PUT    | `/api/users/:id/active/`          | –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è   |
| GET    | `/api/users/:id/sessions/`        | –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è               |
| DELETE | `/api/users/sessions/:sessionId/` | –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                |
| PUT    | `/api/users/:id/password/`        | –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è                   |

#### –°–∏—Å—Ç–µ–º–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥  | –ü—É—Ç—å                              | –û–ø–∏—Å–∞–Ω–∏–µ                                    |
|--------|-----------------------------------|---------------------------------------------|
| GET    | `/api/health/`                    | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–µ—Ä–∞                    |

### –õ–∏–º–∏—Ç—ã API –∏ –ø—Ä–æ—á–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

#### –û–±—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- **–†–∞–∑–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞**: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è Express (~100kb)
- **–ß–∞—Å—Ç–æ—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤**: –Ω–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ rate limiting, –Ω–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —á–µ—Ä–µ–∑ middleware
- **–¢–æ–∫–µ–Ω—ã JWT**: —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è 7 –¥–Ω–µ–π
- **–°–µ—Å—Å–∏–∏**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–æ—Å—Ä–æ—á–µ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π

#### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö API

- **–í–ö–æ–Ω—Ç–∞–∫—Ç–µ API**: —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ VK API. –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ API –í–ö–æ–Ω—Ç–∞–∫—Ç–µ –º–æ–≥—É—Ç –Ω–∞—Ä—É—à–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.
- **–Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ API**: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç API –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–∞–º–∏. –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API –Ø–Ω–¥–µ–∫—Å –º–æ–≥—É—Ç –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ —Ä–∞–±–æ—Ç—É –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤.
- **–¢–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞**: –¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±—É—é—Ç—Å—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±–æ–∏–º —Å–µ—Ä–≤–∏—Å–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–æ–∑–≤–∞–Ω—ã.

#### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API

- **–ö–≤–æ—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤**: –æ–±–∞ API –∏–º–µ—é—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –µ–¥–∏–Ω–∏—Ü—É –≤—Ä–µ–º–µ–Ω–∏.
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤**: –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–º–µ—Ä –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤.
- **–¢–∏–ø—ã —Ñ–∞–π–ª–æ–≤**: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (JPEG, PNG).
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã –í–ö**: –≤ —Å–ª—É—á–∞–µ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å –ø—Ä–∏–≤–∞—Ç–Ω—ã–º –∞–∫–∫–∞—É–Ω—Ç–æ–º –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –¥—Ä—É–∑—å—è, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω—ã —á–µ—Ä–µ–∑ API –í–ö–æ–Ω—Ç–∞–∫—Ç–µ.

#### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–•—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤**: —Ç–æ–∫–µ–Ω—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ, –Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∫–ª—é—á–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è.
- **–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Å–æ–±–ª—é–¥–µ–Ω–∏—è –∑–∞–∫–æ–Ω–æ–¥–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –æ –∑–∞—â–∏—Ç–µ –¥–∞–Ω–Ω—ã—Ö.

#### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

- **–ë–æ–ª—å—à–∏–µ –æ–±—ä–µ–º—ã –¥–∞–Ω–Ω—ã—Ö**: –∑–∞–≥—Ä—É–∑–∫–∞ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –∑–∞–º–µ–¥–ª–µ–Ω–∏—é —Ä–∞–±–æ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- **–°–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞**: —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–∞—á–µ—Å—Ç–≤–∞ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- **–ë—Ä–∞—É–∑–µ—Ä—ã**: –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É –≤ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö.

## 2. –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### 2.1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

- –í—ã–±–æ—Ä —Ä–∞–∑–¥–µ–ª–∞ "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è" –∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è. –ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–µ—Ä–µ–π–¥–µ—Ç –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –í—Ö–æ–¥ –ø–æ –ª–æ–≥–∏–Ω—É –∏ –ø–∞—Ä–æ–ª—é —á–µ—Ä–µ–∑ —Ä–∞–∑–¥–µ–ª "–í—Ö–æ–¥"
- ```users``` - —Ç–∞–±–ª–∏—Ü–∞ –∏–∑ –ë–î, —Ñ–∏–∫—Å–∏—Ä—É—é—â–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –∞–¥–º–∏–Ω–æ–≤
- ```sessions``` - —Ç–∞–±–ª–∏—Ü–∞, –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–µ—Å—Å–∏–∏

<img src="./demo/2-functionality/1.gif" width="100%">

### 2.2. –†–∞–±–æ—Ç–∞ —Å —Ä–µ–∑–µ–≤—Ä–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

- –í–≤–æ–¥ —Ç–æ–∫–µ–Ω–æ–≤ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API –í–ö–æ–Ω—Ç–∞–∫—Ç–µ –∏ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞
- –í—ã–≤–æ–¥ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –í–ö –ø–æ –µ–≥–æ ID. –ü–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–∞–º–µ–Ω—ã —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–æ—Ü–∏–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –ø–æ—Å–ª–µ –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞ –Ω–∞ –Ω–µ–≥–æ
- –í—ã–±–æ—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞. –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ø–∞–ø–∫–µ ```VKDrive```
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ–∫—É—â–∏—Ö —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –≤ –ø–∞–ø–∫–µ ```VKDrive```

<img src="./demo/2-functionality/2.gif" width="100%">

### 2.3. –†–∞–±–æ—Ç–∞ —Å –ø–∞–Ω–µ–ª—å—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

- C–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∞ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
- –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è –æ–±—ã—á–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–º–µ–Ω–∞ –µ–≥–æ –ø–∞—Ä–æ–ª—è
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º: ID, email, –∏–º—è, —Ñ–∞–º–∏–ª–∏—è, —Ä–æ–ª—å, —Å—Ç–∞—Ç—É—Å
- –í–º–µ—Å—Ç–µ —Å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ä–µ–∑–µ—Ä–≤–Ω—ã–º –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

<img src="./demo/2-functionality/3.gif" width="100%">

## 3. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ø–æ–ª—É—á–µ–Ω–∏—é —Ç–æ–∫–µ–Ω–æ–≤ –í–ö –∏ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞

### 3.1. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –í–ö

#### 3.1.1. –í—Ö–æ–¥ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –ø—Ä–∞–≤

- –°–∞–π—Ç [https://vkhost.github.io/](https://vkhost.github.io/) ‚Üí –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ```VK Admin```. –ü–æ—Å–ª–µ –≤—ã–±–æ—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —Å–æ–≥–ª–∞—à–∞–µ–º—Å—è —Å–æ –≤—Å–µ–º–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è–º–∏ (–∫–Ω–æ–ø–∫–∞ ```–†–∞–∑—Ä–µ—à–∏—Ç—å```)
- –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –≤–º–µ—Å—Ç–æ ```VK Admin``` –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞: [https://id.vk.com/about/business/go/docs/ru/vkid/latest/vk-id/connection/tokens/access-token](https://id.vk.com/about/business/go/docs/ru/vkid/latest/vk-id/connection/tokens/access-token)

<img src="./demo/3-tokens/1-1.png" width="100%">

<img src="./demo/3-tokens/1-2.png" width="100%">

#### 3.1.2. –ö–æ–ø–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –í–ö

* –ö–æ–ø–∏—Ä—É–µ–º —á–∞—Å—Ç—å –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –æ—Ç ```access_token=``` –¥–æ ```&expires_in```

<img src="./demo/3-tokens/1-3.png" width="100%">

* –°–æ–∑–¥–∞–Ω–Ω—ã–π –∫–ª—é—á - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è ```–¢–æ–∫–µ–Ω VK```

<img src="./demo/3-tokens/1-4.png" width="100%">


### 3.2. –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫

* –°–∞–π—Ç [https://yandex.ru/dev/disk/poligon](https://yandex.ru/dev/disk/poligon) ‚Üí –ö–Ω–æ–ø–∫–∞ ```–ü–æ–ª—É—á–∏—Ç—å OAuth-—Ç–æ–∫–µ–Ω```

<img src="./demo/3-tokens/2-1.png" width="100%">

* –°–æ–∑–¥–∞–Ω–Ω—ã–π –∫–ª—é—á - –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ–ª—è ```–¢–æ–∫–µ–Ω –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞```

<img src="./demo/3-tokens/2-2.png" width="100%">

## 4. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É –ø—Ä–æ–µ–∫—Ç–∞

### 4.1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

- –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

```bash
git clone https://github.com/maxter9595/VKDriveApp.git
cd VKDriveApp
```

<img src="./demo/4-local-setup/1.gif" width="100%">

### 4.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ SQL-—Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

* –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ ```env_example``` –≤ ```env```:

```bash
bash -c "cp .env_example .env"
```

* –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ ```init-users.sql.example``` –≤ ```init-users.sql```:

```bash
bash -c "cp backend/sql/init-users.sql.example backend/sql/init-users.sql"
```

<img src="./demo/4-local-setup/2.gif" width="100%">

### 4.3. –ó–∞–¥–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –¥–ª—è –ø–µ—Ä–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
npm install
npm run update-passwords -- Admin123! TestUser123!
```

```
# –ü–µ—Ä–≤—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
–ü–æ—á—Ç–∞: admin@vkdrive.local
–ü–∞—Ä–æ–ª—å: Admin123! 

# –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
–ü–æ—á—Ç–∞: test.user@vkdrive.local
–ü–∞—Ä–æ–ª—å: TestUser123!
```

<img src="./demo/4-local-setup/3.gif" width="100%">

### 4.4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–±–æ—Ä–∫–∞

* –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
npm run test:unit
npm run build
```

<img src="./demo/4-local-setup/4.gif" width="100%">

### 4.5. –ó–∞–ø—É—Å–∫ Docker

* –ó–∞–ø—É—Å–∫ Docker Desktop. –ï–≥–æ –Ω–∞–ª–∏—á–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

* –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ Docker:

```bash
docker compose build
docker compose up -d
docker compose ps
```

<img src="./demo/4-local-setup/5.gif" width="100%">

### 4.6. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

* –°—Å—ã–ª–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: [http://localhost/](http://localhost/)

* –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –±—ç–∫–µ–Ω–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: [http://localhost:20000/api/health](http://localhost:20000/api/health)

```
# –ü–µ—Ä–≤—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
–ü–æ—á—Ç–∞: admin@vkdrive.local
–ü–∞—Ä–æ–ª—å: Admin123! 

# –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
–ü–æ—á—Ç–∞: test.user@vkdrive.local
–ü–∞—Ä–æ–ª—å: TestUser123!
```

* –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ë–î (Adminer): [http://localhost:8080/](http://localhost:8080/)

```
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—Ö–æ–¥–∞ –≤ Adminer
System: MySQL
Server: mysql
Username: root
Password: mysql
Database: vkdrive
```

<img src="./demo/4-local-setup/6.gif" width="100%">

## 5. –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

### 5.1. –ü–æ–∫—É–ø–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–µ–º—É

* –†–µ–≥.RU - –û–±–ª–∞—á–Ω—ã–π —Å–µ—Ä–≤–µ—Ä —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º Docker: [https://www.reg.ru/cloud/docker](https://www.reg.ru/cloud/docker)

* –ü—Ä–∏–º–µ—Ä IP-–∞–¥—Ä–µ—Å–∞ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –ø–æ–∫—É–ø–∫–∏:

```
- IP-–∞–¥—Ä–µ—Å: 193.227.241.210
- –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Docker: –¥–∞ 
- –û–±—Ä–∞–∑: Ubuntu
- –¢–∞—Ä–∏—Ñ—ã –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏: –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π
- –¢–∞—Ä–∏—Ñ: HP C2-M2-D40
- –†–µ–≥–∏–æ–Ω —Ä–∞–∑–º–µ—â–µ–Ω–∏—è: –ú–æ—Å–∫–≤–∞
- –ü–ª–∞–≤–∞—é—â–∏–π (–ø—É–±–ª–∏—á–Ω—ã–π) IP-–∞–¥—Ä–µ—Å: –¥–∞
- –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ: –¥–∞
```

* –í—Ö–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ø–æ—Å–ª–µ –µ–≥–æ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏—è:

```bash
ssh root@193.227.241.210
```

<img src="./demo/5-server-deploy/1.gif" width="100%">

### 5.2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥–µ–ø–ª–æ—è

* –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –µ–≥–æ –≤ –≥—Ä—É–ø–ø—É sudo:

```bash
adduser myuser && usermod -aG sudo myuser
```

* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:

```bash
apt update && apt upgrade -y && apt install -y git nginx ufw
```

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall:

```bash
sudo ufw allow 20000 && sudo ufw allow 10000 && sudo ufw allow 8080 && sudo ufw allow 22 && ufw allow 80 && sudo ufw --force enable
```

* –ó–∞–ø—É—Å–∫ Docker, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker –∏ –µ–≥–æ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –¥–ª—è —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∞–≤:

```bash
# –ù–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ Docker —É–∂–µ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
systemctl enable docker && systemctl start docker && usermod -aG docker myuser && exit
```

```bash
# –í—Ö–æ–¥ –ø–æ –ø–∞—Ä–æ–ª—é, –∑–∞–¥–∞–Ω–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ adduser myuser
ssh myuser@193.227.241.210
```

<img src="./demo/5-server-deploy/2.gif" width="100%">

### 5.3. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ñ–∞–π–ª–æ–≤

* –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

```bash
git clone https://github.com/maxter9595/VKDriveApp.git && cd VKDriveApp
```

* –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ IP —Å–µ—Ä–≤–µ—Ä–∞ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é ```SERVER_IP```:

```bash
SERVER_IP=$(curl -s --max-time 3 ifconfig.me || curl -s --max-time 3 ifconfig.co || hostname -I | awk '{print $1}' | head -n1)
```

```bash
echo "Server IP: $SERVER_IP"
```

* –°–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–æ–º:

```bash
cp .env_example_server .env && sed "s/your-server-ip/$SERVER_IP/g" .env_example_server > .env
```

```bash
cp backend/sql/init-users.sql.example backend/sql/init-users.sql
```

<img src="./demo/5-server-deploy/3.gif" width="100%">

### 5.4. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–∞—Ä–æ–ª–µ–π, —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ –∏ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ node.js:

```bash
curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash - && sudo apt-get install -y nodejs
```

* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –∑–∞–¥–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:

```bash
npm install && npm run update-passwords -- Admin123! TestUser123!
```

```
# –ü–µ—Ä–≤—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
–ü–æ—á—Ç–∞: admin@vkdrive.local
–ü–∞—Ä–æ–ª—å: Admin123! 

# –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
–ü–æ—á—Ç–∞: test.user@vkdrive.local
–ü–∞—Ä–æ–ª—å: TestUser123!
```

* –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∏ —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
npm run test:unit && npm run build && cd ~/VKDriveApp
```

<img src="./demo/5-server-deploy/4.gif" width="100%">

### 5.5. –ó–∞–ø—É—Å–∫ Docker

* –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ Nginx:

```bash
sudo netstat -tulpn | grep :80
sudo systemctl stop nginx && sudo systemctl disable nginx
```

* –ó–∞–ø—É—Å–∫ Docker —Å–æ —Å–≤–æ–∏–º–∏ Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏:

```bash
docker compose build && docker compose up -d
sudo netstat -tulpn | grep :80
```

<img src="./demo/5-server-deploy/5.gif" width="100%">

### 5.6. –û—Ç–∫—Ä—ã—Ç–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

* –°—Å—ã–ª–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: [http://193.227.241.210/](http://193.227.241.210/)

* –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã –±—ç–∫–µ–Ω–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: [http://193.227.241.210:20000/api/health](http://193.227.241.210:20000/api/health)

```
# –ü–µ—Ä–≤—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
–ü–æ—á—Ç–∞: admin@vkdrive.local
–ü–∞—Ä–æ–ª—å: Admin123! 

# –¢–µ—Å—Ç–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
–ü–æ—á—Ç–∞: test.user@vkdrive.local
–ü–∞—Ä–æ–ª—å: TestUser123!
```

* –ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ë–î (Adminer): [http://193.227.241.210:8080/](http://193.227.241.210:8080/)

```
# –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—Ö–æ–¥–∞ –≤ Adminer
System: MySQL
Server: mysql
Username: root
Password: mysql
Database: vkdrive
```

<img src="./demo/5-server-deploy/6.gif" width="100%">

## 6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è –ø—Ä–æ–µ–∫—Ç–∞ (CI/CD)

### 6.1. –ü–æ–∫—É–ø–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–µ–º—É

* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH-–∫–ª—é—á–∞ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –ü–ö:

```bash
ssh-keygen -t ed25519 -C "max.t95@bk.ru"
```

* –í—ã–≤–æ–¥ SSH-–∫–ª—é—á–∞ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ü–ö –¥–ª—è –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
type $env:USERPROFILE\.ssh\id_ed25519.pub
```

```bash
# –ö–æ–ø–∏—Ä—É–µ–º SSH-–∫–ª—é—á
ssh-ed25519 AAAA...MZ max.t95@bk.ru
```

<img src="./demo/6-ci-cd/1.png" width="100%">

### 6.2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH-–∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

* –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSH-–∫–ª—é—á–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
ssh-keygen -t ed25519 -C "max.t95@bk.ru"
```

* –í—ã–≤–æ–¥ SSH-–∫–ª—é—á–∞ –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞:

```bash
ssh-keygen -y -f ~/.ssh/id_ed25519
```

```bash
# SSH-–∫–ª—é—á –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ GitHub
ssh-ed25519 AAAA...sk max.t95@bk.ru
```

<img src="./demo/6-ci-cd/2.png" width="100%">

### 6.3. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ SSH-–∫–ª—é—á–µ–π –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ü–ö –∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π —Å–µ—Ä–≤–µ—Ä–∞

* –í–≤–æ–¥ SSH-–∫–ª—é—á–∞ –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ –≤ —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π:

```bash
ssh-keygen -y -f ~/.ssh/id_ed25519 >> ~/.ssh/authorized_keys
```

* –í–≤–æ–¥ SSH-–∫–ª—é—á–∞ –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –ü–ö –≤ —Å–ø–∏—Å–æ–∫ –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π:

```bash
echo "ssh-ed25519 AAAA...MZ max.t95@bk.ru" >> ~/.ssh/authorized_keys
```

* –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π:

```bash
cat ~/.ssh/authorized_keys
```

```bash
# –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–≤–∞ SSH-–∫–ª—é—á–∞ –≤ —Å–ø–∏—Å–∫–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–ª—é—á–µ–π
ssh-ed25519 AAAA...sk max.t95@bk.ru
ssh-ed25519 AAAA...MZ max.t95@bk.ru
```

<img src="./demo/6-ci-cd/3.png" width="100%">

### 6.4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ sudo –±–µ–∑ –ø–∞—Ä–æ–ª—è –¥–ª—è CI/CD

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–ª—è authorized_keys:

```bash
chmod 600 ~/.ssh/authorized_keys && chmod 700 ~/.ssh
```

* –í—Ö–æ–¥ –≤ visudo –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø–∞—Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:  

```bash
sudo visudo
```

```bash
# –î–æ–±–∞–≤–ª—è–µ–º –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞ —Å–ª–µ–¥—É—é—â–µ–µ:
myuser ALL=(ALL) NOPASSWD: ALL
```

* –í—ã—Ö–æ–¥ –∏–∑ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ö–æ–¥–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –±–µ–∑ –ø–∞—Ä–æ–ª—è:

```bash
exit
ssh myuser@193.227.241.210
# –ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Äî –≤–æ–π–¥—ë–º –±–µ–∑ –ø–∞—Ä–æ–ª—è
```

<img src="./demo/6-ci-cd/4.gif" width="100%">

### 6.5. –ü—Ä–∏–≤—è–∑–∫–∞ SSH-–∫–ª—é—á–∞ –∫ GitHub

* –í—ã–≤–æ–¥ –ø—É–±–ª–∏—á–Ω–æ–≥–æ SSH-–∫–ª—é—á–∞ –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å GitHub:

```bash
cat ~/.ssh/id_ed25519.pub
```


```bash
# –ö–æ–ø–∏—Ä—É–µ–º –≤—Å–µ, —á—Ç–æ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω–æ
ssh-ed25519 AAAA...sk max.t95@bk.ru
```

* –ü—Ä–∏–≤—è–∑–∫–∞ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∫–ª—é—á–∞ –∫ GitHub:

   * ```–°–∞–π—Ç GitHub``` ‚Üí ```Settings``` ‚Üí ```SSH and GPG keys``` ‚Üí ```New SSH key```. –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã SHH-–∫–ª—é—á–∞:

     * –¢–∏–ø –∫–ª—é—á–∞: ```Authentication Key``` 
  
     * –ò–º—è –∫–ª—é—á–∞: ```VM-server```

     * –í –ø–æ–ª–µ ```Key``` –¥–æ–±–∞–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ SSH-–∫–ª—é—á–∞. –ü—Ä–∏–º–µ—Ä - ```ssh-ed25519 AAAA...sk max.t95@bk.ru```

  * –ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ SSH-–∫–ª—é—á–∞ –Ω–∞–∂–∏–º–∞–µ–º ```Add SSH key```

<img src="./demo/6-ci-cd/5.png" width="100%">

### 6.6. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π–ª–∞ SSH-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ GitHub

* –í–Ω–µ—Å–µ–Ω–∏–µ GitHub –≤ —Å–ø–∏—Å–æ–∫ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ö–æ—Å—Ç–æ–≤ —Å–µ—Ä–≤–µ—Ä–∞:

```bash
ssh-keyscan -H github.com >> ~/.ssh/known_hosts
```

* –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è SSH:

```bash
nano ~/.ssh/config
```

```
----- ~/.ssh/config -----
Host github.com
    HostName github.com
    User git
    IdentityFile ~/.ssh/id_ed25519
----- ~/.ssh/config -----
```

* –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∞–≤ –¥–ª—è —Ñ–∞–π–ª–∞ SSH-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```bash
chmod 600 ~/.ssh/config
```

* –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å GitHub:

```bash
ssh -T git@github.com
# –ï—Å–ª–∏ –≤—Å—ë –æ–∫ ‚Äî —É–≤–∏–¥–∏–º —Å–ª–µ–¥—É—é—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:
# Hi <–ª–æ–≥–∏–Ω>! You've successfully authenticated ...
```

<img src="./demo/6-ci-cd/6.gif" width="100%">


### 6.7. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–Ω–∞—á–µ–Ω–∏–π secret-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

* –í–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è ```SSH_PRIVATE_KEY```:

```bash
cat ~/.ssh/id_ed25519
```

```bash
# –ö–æ–ø–∏—Ä—É–µ–º –≤—Å–µ –≤–º–µ—Å—Ç–µ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ BEGIN –∏ END
-----BEGIN OPENSSH PRIVATE KEY----- 
b3...nU= 
-----END OPENSSH PRIVATE KEY-----
```

* –í–≤–æ–¥ secrets –¥–ª—è –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è GitHub-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:

  * SSH_HOST: ```193.227.241.210``` (–∏–ª–∏ –¥—Ä—É–≥–æ–π IP-–∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞)

  * SSH_USER: ```myuser```

  * SSH_PRIVATE_KEY: —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–º–∞–Ω–¥—ã ```cat ~/.ssh/id_ed25519``` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

<img src="./demo/6-ci-cd/7-1.png" width="100%">

* –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ secrets –ø—Ä–æ–≤–µ—Ä—è–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –∞–≤—Ç–æ–¥–µ–ø–ª–æ—è

<img src="./demo/6-ci-cd/7-2.gif" width="100%">
